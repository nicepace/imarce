<div id="ft" style="padding: 2px 5px;">
         <a href="#" onclick="addUser()" class="easyui-linkbutton" iconCls="icon-add" plain="true"></a>
		<a href="#" class="easyui-linkbutton" iconCls="icon-cut" plain="true" onclick="deleteRec()"></a> 
	</div>
<div class="easyui-panel" title="角色">
	<table id="flusher" class="easyui-datagrid" data-options=
	"url:'../queryRole',pagination:true,singleSelect:true,onClickRow:getRecId,onDblClickRow:updateUser" 
	style="height:480px">
		<thead>
			<tr>
				<th data-options="field:'roleId',width:100">角色Id</th>
				<th data-options="field:'roleName',width:150">角色名</th>
			</tr>
		</thead>
	</table>
</div>

<script>

var RecId = null;
function getRecId(index,row){
	RecId=row.roleId;
}
function updateUser(index,row){
	 
	openWindow("编辑角色信息",400,150,"../ShowroleById?roleid="+row.roleId);
 }
function addUser(){
	 openWindow("添加角色信息",400,200,"fragment/role_add.html");
}
function deleteRec(){
		if(RecId!=null&&RecId>0){
			$.messager.confirm('Confirm', '确认删除?', function(r){
			if (r){
				 $.ajax({
				     url:"../delete_role",
					 type:"post",
					 dataType:"json",
					 data:{ 
					           "roleid":RecId								          
						  },
				     success:function(da){	
				    	 if(da.code=="10001"){
				    	     alert(da.msg)
				    	 }else{
				    		 alert(da.msg)
				    	 }							    	 
				    	 $("#flusher").datagrid("reload"); 	
				    	 RecId=null;
				     },
					 error:function(){
						 alert("删除失败");
					 }  
				});			
			}
		});
		}
		else{
			alert("选择要删除的行！");
		}
}


</script>